[gd_scene format=3 uid="uid://2uy3p24dwfyb"]

[ext_resource type="Script" uid="uid://djmxsanm0oebl" path="res://Hakeem/scripts/game_manager.gd" id="1_uw8xp"]
[ext_resource type="PackedScene" uid="uid://ci5djhf2onhk2" path="res://Hakeem/scenes/Hole.tscn" id="2_4upjg"]
[ext_resource type="PackedScene" uid="uid://cihmwbik685yv" path="res://Assets/kennyGolf/flag-red.glb" id="3_nqeob"]
[ext_resource type="MeshLibrary" uid="uid://dyooyv1tv6vsc" path="res://Assets/golfFr.meshlib" id="4_jorw0"]
[ext_resource type="PackedScene" uid="uid://brvr0b3yd08hg" path="res://Hakeem/scenes/ball.tscn" id="5_4uhwj"]
[ext_resource type="Script" uid="uid://8vyuhyx0xogt" path="res://addons/freecam_3D/freecam.gd" id="6_g7k2o"]
[ext_resource type="Script" uid="uid://w35rocmctxqt" path="res://Sheref/Scenes/raycast_place.gd" id="7_i2yhf"]
[ext_resource type="PackedScene" uid="uid://drpyecvpqsojc" path="res://Sheref/Scenes/pull_ghost.tscn" id="8_8f1kp"]
[ext_resource type="Script" uid="uid://craekggkqk7qc" path="res://Hakeem/scripts/state_machine.gd" id="9_7tujh"]
[ext_resource type="Script" uid="uid://dtgvrovjwxvaj" path="res://Hakeem/scripts/ball_camera_state.gd" id="10_2q3xy"]
[ext_resource type="Script" uid="uid://ehywccd4wy43" path="res://Hakeem/scripts/free_camera_state.gd" id="11_33ipg"]
[ext_resource type="PackedScene" uid="uid://1ynfq6j3mvnf" path="res://Sheref/Scenes/ghost_selector.tscn" id="12_swe04"]
[ext_resource type="PackedScene" uid="uid://bnwtvfpn55ysb" path="res://Sheref/Scenes/ghost_tooltip.tscn" id="13_whkq8"]
[ext_resource type="PackedScene" uid="uid://ci5533xnu4r6" path="res://Hakeem/scenes/killzone.tscn" id="14_m2kki"]
[ext_resource type="PackedScene" uid="uid://dgameuiscene" path="res://Scenes/game_ui.tscn" id="15_lt6qp"]
[ext_resource type="PackedScene" path="res://Scenes/dialogue_box.tscn" id="16_aruju"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_q1rpn"]
sky_top_color = Color(0.3156387, 0.400838, 0.8336093, 1)
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_bottom_color = Color(0.36250004, 0.48531127, 0.8364927, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_c6iih"]
sky_material = SubResource("ProceduralSkyMaterial_q1rpn")

[sub_resource type="Environment" id="Environment_h6qgw"]
background_mode = 2
sky = SubResource("Sky_c6iih")
tonemap_mode = 2
glow_enabled = true

[node name="FullLevelTest" type="Node3D" unique_id=573101184]

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=367762448]
environment = SubResource("Environment_h6qgw")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=307499351]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="GameManager" type="Node" parent="." unique_id=175576669]
unique_name_in_owner = true
script = ExtResource("1_uw8xp")
intro_dialogues = Array[String](["WIZARD: One more round and I'll win.", "WIZARD: Better place my ghosts strategically."])
transition_dialogues = Array[String](["REPORTER: This wizard guy is definetly cheating!", "REPORTER: It's hard to get visual proof though..."])

[node name="Hole" parent="GameManager" unique_id=36256616 instance=ExtResource("2_4upjg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.5, 0.29841045, 13.470305)

[node name="CollisionShape3D" parent="GameManager/Hole" index="0" unique_id=2140770143]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.016657352, -0.18662739, 0.010822296)
debug_color = Color(0, 0.6, 0.69803923, 0.6509804)

[node name="flag-red2" parent="GameManager/Hole" unique_id=1442105961 instance=ExtResource("3_nqeob")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.19133481, 0)

[node name="GridMap" type="GridMap" parent="GameManager" unique_id=876672698]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 3, 0, 0, 0)
mesh_library = ExtResource("4_jorw0")
cell_size = Vector3(0.5, 0.05, 0.5)
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PackedInt32Array(65533, 5, 9, 65533, 3, 655446, 65533, 1, 655446, 65533, 65535, 111, 65533, 65533, 110, 65533, 65531, 111, 65533, 65529, 655451, 1, 65529, 1048667, 65535, 65529, 1048662, 1, 65531, 10, 1, 65533, 86, 1, 65535, 107, 1, 3, 108, 1, 1, 86, 1, 5, 30, 1, 7, 8, 1, 9, 91, 65535, 9, 1441878, 65533, 9, 1441808)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="Ball" parent="GameManager" unique_id=411611324 instance=ExtResource("5_4uhwj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.2812233, 0.37401742, 7.8896847)

[node name="Freecam3D" type="Camera3D" parent="GameManager" unique_id=835960371]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("6_g7k2o")
metadata/_custom_type_script = "uid://8vyuhyx0xogt"

[node name="RayCast3D" type="RayCast3D" parent="GameManager/Freecam3D" unique_id=1299317908]
target_position = Vector3(0, 0, -30)
script = ExtResource("7_i2yhf")
building_scene = ExtResource("8_8f1kp")

[node name="StateMachine" type="Node" parent="GameManager" unique_id=235503467 node_paths=PackedStringArray("initial_state")]
script = ExtResource("9_7tujh")
initial_state = NodePath("ball_camera_state")

[node name="ball_camera_state" type="Node" parent="GameManager/StateMachine" unique_id=472957464]
script = ExtResource("10_2q3xy")

[node name="free_camera_state" type="Node" parent="GameManager/StateMachine" unique_id=1454004940]
script = ExtResource("11_33ipg")

[node name="ui" type="Node" parent="GameManager" unique_id=1845031449]

[node name="ghost_selector" parent="GameManager/ui" unique_id=992232534 instance=ExtResource("12_swe04")]
visible = false
offset_top = -181.0
offset_bottom = 8.0

[node name="ghost_tooltip" parent="GameManager/ui" unique_id=640808707 instance=ExtResource("13_whkq8")]
visible = false

[node name="Killzone" parent="GameManager" unique_id=258273182 instance=ExtResource("14_m2kki")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.6061659, -2.4635687, -1.5597734)

[node name="GameUI" parent="GameManager" unique_id=659565879 instance=ExtResource("15_lt6qp")]
process_mode = 3
par_value = 8

[node name="DialogueBox" parent="GameManager" unique_id=1693373207 instance=ExtResource("16_aruju")]

[connection signal="ball_entered" from="GameManager/Hole" to="GameManager" method="_on_hole_ball_entered"]
[connection signal="changed_ghost_selection" from="GameManager/ui/ghost_selector" to="GameManager" method="_on_ghost_selector_changed_ghost_selection"]
[connection signal="death" from="GameManager/Killzone" to="GameManager" method="_on_killzone_death"]

[editable path="GameManager/Hole"]
[editable path="GameManager/Ball"]
[editable path="GameManager/Ball/hit_vfx"]
